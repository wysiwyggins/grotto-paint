<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Sketch</title>

    <link rel="stylesheet" type="text/css" href="style.css">

    <script src="libraries/p5.min.js"></script>
    <script src="libraries/p5.sound.min.js"></script>
    
  </head>

  <body>
    <script src="sketch.js"></script>
    <script src="fpsTimer.js"></script>

    <div id="sketch"></div>
    <div class="ui" >
      
      <!--<div class="transforms">
        transforms
        <button onclick="cyclePalette();" class="mid" id="tool3-button">‚ôΩ</button>
        <button onclick="flipFrameHorizontal();" class="mid" id="tool3-button">‚ÜîÔ∏è</button>
      </div>-->
      
      <!--<div class="tools">
        tools
        <button onclick="setTool(0);" class="mid" id="tool1-button">‚úèÔ∏é</button>
        <button onclick="setTool(1);" class="mid" id="tool2-button">‚óªÔ∏é</button>
        <button onclick="setTool(3);" class="mid" id="tool4-button">ü™£</button>
      </div>-->
      shaded tiles
      <div class="palette shades">
          <button onclick="setSwatch(0);" title="0" class="mini"><img srcset="/assets/tiles/Block216.png"/></button>
          <button onclick="setSwatch(1);" title="1" class="mini"><img srcset="/assets/tiles/Block127.png"/></button>
          <button onclick="setSwatch(2);" title="2" class="mini"><img srcset="/assets/tiles/Block177.png"/></button>
          <button onclick="setSwatch(3);" title="3" class="mini"><img srcset="/assets/tiles/Block176.png"/></button>
          <button onclick="setSwatch(4);" title="4" class="mini"><img srcset="/assets/tiles/Block130.png"/></button>
          <button onclick="setSwatch(5);" title="5" class="mini"><img srcset="/assets/tiles/Block175.png"/></button>
          <button onclick="setSwatch(6);" title="6" class="mini"><img srcset="/assets/tiles/Block133.png"/></button>
          <button onclick="setSwatch(7);" title="6" class="mini"><img srcset="/assets/tiles/Block0.png"/></button>
      </div>
      glyph tiles
      <div class="palette glyphs" >
          <div class="sprite-grid">
            <button class="mini sprite" data-index="0"></button>
<button class="mini sprite" data-index="1"></button>
<button class="mini sprite" data-index="2"></button>
<button class="mini sprite" data-index="3"></button>
<button class="mini sprite" data-index="4"></button>
<button class="mini sprite" data-index="5"></button>
<button class="mini sprite" data-index="6"></button>
<button class="mini sprite" data-index="7"></button>
<button class="mini sprite" data-index="8"></button>
<button class="mini sprite" data-index="9"></button>
<button class="mini sprite" data-index="10"></button>
<button class="mini sprite" data-index="11"></button>
<button class="mini sprite" data-index="12"></button>
<button class="mini sprite" data-index="13"></button>
<button class="mini sprite" data-index="14"></button>
<button class="mini sprite" data-index="15"></button>
<button class="mini sprite" data-index="16"></button>
<button class="mini sprite" data-index="17"></button>
<button class="mini sprite" data-index="18"></button>
<button class="mini sprite" data-index="19"></button>
<button class="mini sprite" data-index="20"></button>
<button class="mini sprite" data-index="21"></button>
<button class="mini sprite" data-index="22"></button>
<button class="mini sprite" data-index="23"></button>
<button class="mini sprite" data-index="24"></button>
<button class="mini sprite" data-index="25"></button>
<button class="mini sprite" data-index="26"></button>
<button class="mini sprite" data-index="27"></button>
<button class="mini sprite" data-index="28"></button>
<button class="mini sprite" data-index="29"></button>
<button class="mini sprite" data-index="30"></button>
<button class="mini sprite" data-index="31"></button>
<button class="mini sprite" data-index="32"></button>
<button class="mini sprite" data-index="33"></button>
<button class="mini sprite" data-index="34"></button>
<button class="mini sprite" data-index="35"></button>
<button class="mini sprite" data-index="36"></button>
<button class="mini sprite" data-index="37"></button>
<button class="mini sprite" data-index="38"></button>
<button class="mini sprite" data-index="39"></button>
<button class="mini sprite" data-index="40"></button>
<button class="mini sprite" data-index="41"></button>
<button class="mini sprite" data-index="42"></button>
<button class="mini sprite" data-index="43"></button>
<button class="mini sprite" data-index="44"></button>
<button class="mini sprite" data-index="45"></button>
<button class="mini sprite" data-index="46"></button>
<button class="mini sprite" data-index="47"></button>
<button class="mini sprite" data-index="48"></button>
<button class="mini sprite" data-index="49"></button>
<button class="mini sprite" data-index="50"></button>
<button class="mini sprite" data-index="51"></button>
<button class="mini sprite" data-index="52"></button>
<button class="mini sprite" data-index="53"></button>
<button class="mini sprite" data-index="54"></button>
<button class="mini sprite" data-index="55"></button>
<button class="mini sprite" data-index="56"></button>
<button class="mini sprite" data-index="57"></button>
<button class="mini sprite" data-index="58"></button>
<button class="mini sprite" data-index="59"></button>
<button class="mini sprite" data-index="60"></button>
<button class="mini sprite" data-index="61"></button>
<button class="mini sprite" data-index="62"></button>
<button class="mini sprite" data-index="63"></button>
<button class="mini sprite" data-index="64"></button>
<button class="mini sprite" data-index="65"></button>
<button class="mini sprite" data-index="66"></button>
<button class="mini sprite" data-index="67"></button>
<button class="mini sprite" data-index="68"></button>
<button class="mini sprite" data-index="69"></button>
<button class="mini sprite" data-index="70"></button>
<button class="mini sprite" data-index="71"></button>
<button class="mini sprite" data-index="72"></button>
<button class="mini sprite" data-index="73"></button>
<button class="mini sprite" data-index="74"></button>
<button class="mini sprite" data-index="75"></button>
<button class="mini sprite" data-index="76"></button>
<button class="mini sprite" data-index="77"></button>
<button class="mini sprite" data-index="78"></button>
<button class="mini sprite" data-index="79"></button>
<button class="mini sprite" data-index="80"></button>
<button class="mini sprite" data-index="81"></button>
<button class="mini sprite" data-index="82"></button>
<button class="mini sprite" data-index="83"></button>
<button class="mini sprite" data-index="84"></button>
<button class="mini sprite" data-index="85"></button>
<button class="mini sprite" data-index="86"></button>
<button class="mini sprite" data-index="87"></button>
<button class="mini sprite" data-index="88"></button>
<button class="mini sprite" data-index="89"></button>
<button class="mini sprite" data-index="90"></button>
<button class="mini sprite" data-index="91"></button>
<button class="mini sprite" data-index="92"></button>
<button class="mini sprite" data-index="93"></button>
<button class="mini sprite" data-index="94"></button>
<button class="mini sprite" data-index="95"></button>
<button class="mini sprite" data-index="96"></button>
<button class="mini sprite" data-index="97"></button>
<button class="mini sprite" data-index="98"></button>
<button class="mini sprite" data-index="99"></button>
<button class="mini sprite" data-index="100"></button>
<button class="mini sprite" data-index="101"></button>
<button class="mini sprite" data-index="102"></button>
<button class="mini sprite" data-index="103"></button>
<button class="mini sprite" data-index="104"></button>
<button class="mini sprite" data-index="105"></button>
<button class="mini sprite" data-index="106"></button>
<button class="mini sprite" data-index="107"></button>
<button class="mini sprite" data-index="108"></button>
<button class="mini sprite" data-index="109"></button>
<button class="mini sprite" data-index="110"></button>
<button class="mini sprite" data-index="111"></button>
<button class="mini sprite" data-index="112"></button>
<button class="mini sprite" data-index="113"></button>
<button class="mini sprite" data-index="114"></button>
<button class="mini sprite" data-index="115"></button>
<button class="mini sprite" data-index="116"></button>
<button class="mini sprite" data-index="117"></button>
<button class="mini sprite" data-index="118"></button>
<button class="mini sprite" data-index="119"></button>
<button class="mini sprite" data-index="120"></button>
<button class="mini sprite" data-index="121"></button>
<button class="mini sprite" data-index="122"></button>
<button class="mini sprite" data-index="123"></button>
<button class="mini sprite" data-index="124"></button>
<button class="mini sprite" data-index="125"></button>
<button class="mini sprite" data-index="126"></button>
<button class="mini sprite" data-index="127"></button>
<button class="mini sprite" data-index="128"></button>
<button class="mini sprite" data-index="129"></button>
<button class="mini sprite" data-index="130"></button>
<button class="mini sprite" data-index="131"></button>
<button class="mini sprite" data-index="132"></button>
<button class="mini sprite" data-index="133"></button>
<button class="mini sprite" data-index="134"></button>
<button class="mini sprite" data-index="135"></button>
<button class="mini sprite" data-index="136"></button>
<button class="mini sprite" data-index="137"></button>
<button class="mini sprite" data-index="138"></button>
<button class="mini sprite" data-index="139"></button>
<button class="mini sprite" data-index="140"></button>
<button class="mini sprite" data-index="141"></button>
<button class="mini sprite" data-index="142"></button>
<button class="mini sprite" data-index="143"></button>
<button class="mini sprite" data-index="144"></button>
<button class="mini sprite" data-index="145"></button>
<button class="mini sprite" data-index="146"></button>
<button class="mini sprite" data-index="147"></button>
<button class="mini sprite" data-index="148"></button>
<button class="mini sprite" data-index="149"></button>
<button class="mini sprite" data-index="150"></button>
<button class="mini sprite" data-index="151"></button>
<button class="mini sprite" data-index="152"></button>
<button class="mini sprite" data-index="153"></button>
<button class="mini sprite" data-index="154"></button>
<button class="mini sprite" data-index="155"></button>
<button class="mini sprite" data-index="156"></button>
<button class="mini sprite" data-index="157"></button>
<button class="mini sprite" data-index="158"></button>
<button class="mini sprite" data-index="159"></button>
<button class="mini sprite" data-index="160"></button>
<button class="mini sprite" data-index="161"></button>
<button class="mini sprite" data-index="162"></button>
<button class="mini sprite" data-index="163"></button>
<button class="mini sprite" data-index="164"></button>
<button class="mini sprite" data-index="165"></button>
<button class="mini sprite" data-index="166"></button>
<button class="mini sprite" data-index="167"></button>
<button class="mini sprite" data-index="168"></button>
<button class="mini sprite" data-index="169"></button>
<button class="mini sprite" data-index="170"></button>
<button class="mini sprite" data-index="171"></button>
<button class="mini sprite" data-index="172"></button>
<button class="mini sprite" data-index="173"></button>
<button class="mini sprite" data-index="174"></button>
<button class="mini sprite" data-index="175"></button>
<button class="mini sprite" data-index="176"></button>
<button class="mini sprite" data-index="177"></button>
<button class="mini sprite" data-index="178"></button>
<button class="mini sprite" data-index="179"></button>
<button class="mini sprite" data-index="180"></button>
<button class="mini sprite" data-index="181"></button>
<button class="mini sprite" data-index="182"></button>
<button class="mini sprite" data-index="183"></button>
<button class="mini sprite" data-index="184"></button>
<button class="mini sprite" data-index="185"></button>
<button class="mini sprite" data-index="186"></button>
<button class="mini sprite" data-index="187"></button>
<button class="mini sprite" data-index="188"></button>
<button class="mini sprite" data-index="189"></button>
<button class="mini sprite" data-index="190"></button>
<button class="mini sprite" data-index="191"></button>
<button class="mini sprite" data-index="192"></button>
<button class="mini sprite" data-index="193"></button>
<button class="mini sprite" data-index="194"></button>
<button class="mini sprite" data-index="195"></button>
<button class="mini sprite" data-index="196"></button>
<button class="mini sprite" data-index="197"></button>
<button class="mini sprite" data-index="198"></button>
<button class="mini sprite" data-index="199"></button>
<button class="mini sprite" data-index="200"></button>
<button class="mini sprite" data-index="201"></button>
<button class="mini sprite" data-index="202"></button>
<button class="mini sprite" data-index="203"></button>
<button class="mini sprite" data-index="204"></button>
<button class="mini sprite" data-index="205"></button>
<button class="mini sprite" data-index="206"></button>
<button class="mini sprite" data-index="207"></button>
<button class="mini sprite" data-index="208"></button>
<button class="mini sprite" data-index="209"></button>
<button class="mini sprite" data-index="210"></button>
<button class="mini sprite" data-index="211"></button>
<button class="mini sprite" data-index="212"></button>
<button class="mini sprite" data-index="213"></button>
<button class="mini sprite" data-index="214"></button>
<button class="mini sprite" data-index="215"></button>
<button class="mini sprite" data-index="216"></button>
<button class="mini sprite" data-index="217"></button>
<button class="mini sprite" data-index="218"></button>
<button class="mini sprite" data-index="219"></button>
<button class="mini sprite" data-index="220"></button>
<button class="mini sprite" data-index="221"></button>
<button class="mini sprite" data-index="222"></button>
<button class="mini sprite" data-index="223"></button>
<button class="mini sprite" data-index="224"></button>
<button class="mini sprite" data-index="225"></button>
<button class="mini sprite" data-index="226"></button>
<button class="mini sprite" data-index="227"></button>
<button class="mini sprite" data-index="228"></button>
<button class="mini sprite" data-index="229"></button>
<button class="mini sprite" data-index="230"></button>
<button class="mini sprite" data-index="231"></button>
<button class="mini sprite" data-index="232"></button>
<button class="mini sprite" data-index="233"></button>
<button class="mini sprite" data-index="234"></button>
<button class="mini sprite" data-index="235"></button>
<button class="mini sprite" data-index="236"></button>
<button class="mini sprite" data-index="237"></button>
<button class="mini sprite" data-index="238"></button>
<button class="mini sprite" data-index="239"></button>
<button class="mini sprite" data-index="240"></button>
<button class="mini sprite" data-index="241"></button>
<button class="mini sprite" data-index="242"></button>
<button class="mini sprite" data-index="243"></button>
<button class="mini sprite" data-index="244"></button>
<button class="mini sprite" data-index="245"></button>
<button class="mini sprite" data-index="246"></button>
<button class="mini sprite" data-index="247"></button>
<button class="mini sprite" data-index="248"></button>
<button class="mini sprite" data-index="249"></button>
<button class="mini sprite" data-index="250"></button>
<button class="mini sprite" data-index="251"></button>
<button class="mini sprite" data-index="252"></button>
<button class="mini sprite" data-index="253"></button>
<button class="mini sprite" data-index="254"></button>
<button class="mini sprite" data-index="255"></button>
<button class="mini sprite" data-index="256"></button>
<button class="mini sprite" data-index="257"></button>
<button class="mini sprite" data-index="258"></button>
<button class="mini sprite" data-index="259"></button>
<button class="mini sprite" data-index="260"></button>
<button class="mini sprite" data-index="261"></button>
<button class="mini sprite" data-index="262"></button>
<button class="mini sprite" data-index="263"></button>
<button class="mini sprite" data-index="264"></button>
<button class="mini sprite" data-index="265"></button>
<button class="mini sprite" data-index="266"></button>
<button class="mini sprite" data-index="267"></button>
<button class="mini sprite" data-index="268"></button>
<button class="mini sprite" data-index="269"></button>
<button class="mini sprite" data-index="270"></button>
<button class="mini sprite" data-index="271"></button>
<button class="mini sprite" data-index="272"></button>
<button class="mini sprite" data-index="273"></button>
<button class="mini sprite" data-index="274"></button>
<button class="mini sprite" data-index="275"></button>

            
          </div>
      </div>
      rules

      <div class="rules">
        <div class="input2 rule-grid">
          <button class="mini when"  data-index="0"></button>
          <button class="mini when"  data-index="1"></button>
          <button class="mini when"  data-index="2"></button>
          <button class="mini when"  data-index="3"></button>
          <button class="mini when"  data-index="4"></button>
          <button class="mini when"  data-index="5"></button>
          <button class="mini when"  data-index="6"></button>
          <button class="mini when"  data-index="7"></button>
          <button class="mini when"  data-index="8"></button>
        </div>
        <div class="rule-divider">
          =>
        </div>
        <div class="output2 rule-grid">
          <button class="mini then"  data-index="0"></button>
          <button class="mini then"  data-index="1"></button>
          <button class="mini then"  data-index="2"></button>
          <button class="mini then"  data-index="3"></button>
          <button class="mini then"  data-index="4"></button>
          <button class="mini then"  data-index="5"></button>
          <button class="mini then"  data-index="6"></button>
          <button class="mini then"  data-index="7"></button>
          <button class="mini then"  data-index="8"></button>
        </div>
      </div>

      <div class="row">
        <div id="frames-amount">frames: <span id="totalFramesText">1</span></div>
        <div class = "frames">current frame: <span id="currentFrameText">1</span></div>
      </div>
      <div class="row">
        <label for="import-button">import reference image</label>
        <input type="file" id="imageInput" onclick="loadSourceImage()"/> 
      </div>
      <div class="row">
        <label for="load-all">load anim data</label>
        <input type="file" id="jsonInput" onclick="loadAnim()"/>
      </div>
      <div class="row">
        frames:
        <button onclick="backFrame()" id="decrementButton">‚¨ÖÔ∏è</button>
        <button onclick="playFrames()" id="playButton">‚ñ∂Ô∏è</button>
        <button onclick="advanceFrame()" id="incrementButton">‚û°Ô∏è</button>
        <button onclick="addFrame()" id="addButton">‚ûï</button>
      </div>
      
      <div class="row">
        <label for="save-all">save anim data </label>
        <button onclick="saveAnim()"; id="save-all">üíæ</button>

        <label for="save-frame">save frame as png</label>
        <button onclick="saveFrame()"; id="save-frame">üì∏</button>

        
      </div>
     
    </div>

    <!-- <div class="ui">
      <div class="row">
        <ul class="key">
          <li class = "arrow">arrow</li>
        </ul>
      </div>
    </div> -->

  <script>
    // Get the list element where the images will be appended
    const list = document.getElementById("glyphs");

    // The local path to the directory containing the images
    const dir = "assets/tiles/";

    let counter = 1;

    // use XMLHttpRequest to get the list of images in the directory
    const xhr = new XMLHttpRequest();
    xhr.open("GET", dir);
    xhr.onload = function() {
      if (xhr.status === 200) {
        // parse response text as json
        console.log(xhr.responseText);
        const files = JSON.parse(xhr.responseText);
        // Loop through each file in the directory
        files.forEach(file => {
          // Check if the file is an image
          if (file.type.match(/image.*/)) {
            // Create a <button> element
            const btn = document.createElement("button");
            // Create an <img> element and set its src to the file path
            const img = document.createElement("img");
            img.src = dir + file.name;
            // set the button title attribute with current counter 
            btn.setAttribute("title", `${counter}`);
            btn.setAttribute("onClick", `setSwatch(${counter});`);
            btn.setAttribute("class", "mini");

            // increment the counter 
            counter++;
            // Append the <img> element to the <button>
            btn.appendChild(img);
            // Append the <btn> element to the <div>
            list.appendChild(btn);
          }
        });
      } else {
        console.error(xhr.statusText);
      }
    };
    xhr.onerror = function(e) {
      console.error(xhr.statusText);
    };
    xhr.send();

  </script>
  </body>
</html>
