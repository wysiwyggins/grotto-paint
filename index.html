<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Sketch</title>

    <link rel="stylesheet" type="text/css" href="style.css">

    <script src="libraries/p5.min.js"></script>
    <script src="libraries/p5.sound.min.js"></script>
    
  </head>

  <body>
    <script src="sketch.js"></script>
    <script src="fpsTimer.js"></script>

    <div id="sketch"></div>
    <div class="ui" >
      
      <!--<div class="transforms">
        transforms
        <button onclick="cyclePalette();" class="mid" id="tool3-button">‚ôΩ</button>
        <button onclick="flipFrameHorizontal();" class="mid" id="tool3-button">‚ÜîÔ∏è</button>
      </div>-->
      
      <!--<div class="tools">
        tools
        <button onclick="setTool(0);" class="mid" id="tool1-button">‚úèÔ∏é</button>
        <button onclick="setTool(1);" class="mid" id="tool2-button">‚óªÔ∏é</button>
        <button onclick="setTool(3);" class="mid" id="tool4-button">ü™£</button>
      </div>-->
    shaded tiles
      <div class="palette shades">
          <button onclick="setSwatch(0);" title="0" class="mini"><img srcset="/assets/tiles/Block216.png"/></button>
          <button onclick="setSwatch(1);" title="1" class="mini"><img srcset="/assets/tiles/Block127.png"/></button>
          <button onclick="setSwatch(2);" title="2" class="mini"><img srcset="/assets/tiles/Block177.png"/></button>
          <button onclick="setSwatch(3);" title="3" class="mini"><img srcset="/assets/tiles/Block176.png"/></button>
          <button onclick="setSwatch(4);" title="4" class="mini"><img srcset="/assets/tiles/Block130.png"/></button>
          <button onclick="setSwatch(5);" title="5" class="mini"><img srcset="/assets/tiles/Block175.png"/></button>
          <button onclick="setSwatch(6);" title="6" class="mini"><img srcset="/assets/tiles/Block133.png"/></button>
          <button onclick="setSwatch(7);" title="6" class="mini"><img srcset="/assets/tiles/Block0.png"/></button>
      </div>
     tiles
      <div class="palette glyphs" >
          <div class="sprite-grid">
          <button class="mini sprite" onclick="setSwatch(0)"></button>
          <button class="mini sprite" onclick="setSwatch(1)"></button>
          <button class="mini sprite" onclick="setSwatch(2)"></button>
          <button class="mini sprite" onclick="setSwatch(3)"></button>
          <button class="mini sprite" onclick="setSwatch(4)"></button>
          <button class="mini sprite" onclick="setSwatch(5)"></button>
          <button class="mini sprite" onclick="setSwatch(6)"></button>
          <button class="mini sprite" onclick="setSwatch(7)"></button>
          <button class="mini sprite" onclick="setSwatch(8)"></button>
          <button class="mini sprite" onclick="setSwatch(9)"></button>
          <button class="mini sprite" onclick="setSwatch(10)"></button>
          <button class="mini sprite" onclick="setSwatch(11)"></button>
          <button class="mini sprite" onclick="setSwatch(12)"></button>
          <button class="mini sprite" onclick="setSwatch(13)"></button>
          <button class="mini sprite" onclick="setSwatch(14)"></button>
          <button class="mini sprite" onclick="setSwatch(15)"></button>
          <button class="mini sprite" onclick="setSwatch(16)"></button>
          <button class="mini sprite" onclick="setSwatch(17)"></button>
          <button class="mini sprite" onclick="setSwatch(18)"></button>
          <button class="mini sprite" onclick="setSwatch(19)"></button>
          <button class="mini sprite" onclick="setSwatch(20)"></button>
          <button class="mini sprite" onclick="setSwatch(21)"></button>
          <button class="mini sprite" onclick="setSwatch(22)"></button>
          <button class="mini sprite" onclick="setSwatch(23)"></button>
          <button class="mini sprite" onclick="setSwatch(24)"></button>
          <button class="mini sprite" onclick="setSwatch(25)"></button>
          <button class="mini sprite" onclick="setSwatch(26)"></button>
          <button class="mini sprite" onclick="setSwatch(27)"></button>
          <button class="mini sprite" onclick="setSwatch(28)"></button>
          <button class="mini sprite" onclick="setSwatch(29)"></button>
          <button class="mini sprite" onclick="setSwatch(30)"></button>
          <button class="mini sprite" onclick="setSwatch(31)"></button>
          <button class="mini sprite" onclick="setSwatch(32)"></button>
          <button class="mini sprite" onclick="setSwatch(33)"></button>
          <button class="mini sprite" onclick="setSwatch(34)"></button>
          <button class="mini sprite" onclick="setSwatch(35)"></button>
          <button class="mini sprite" onclick="setSwatch(36)"></button>
          <button class="mini sprite" onclick="setSwatch(37)"></button>
          <button class="mini sprite" onclick="setSwatch(38)"></button>
          <button class="mini sprite" onclick="setSwatch(39)"></button>
          <button class="mini sprite" onclick="setSwatch(40)"></button>
          <button class="mini sprite" onclick="setSwatch(41)"></button>
          <button class="mini sprite" onclick="setSwatch(42)"></button>
          <button class="mini sprite" onclick="setSwatch(43)"></button>
          <button class="mini sprite" onclick="setSwatch(44)"></button>
          <button class="mini sprite" onclick="setSwatch(45)"></button>
          <button class="mini sprite" onclick="setSwatch(46)"></button>
          <button class="mini sprite" onclick="setSwatch(47)"></button>
          <button class="mini sprite" onclick="setSwatch(48)"></button>
          <button class="mini sprite" onclick="setSwatch(49)"></button>
          <button class="mini sprite" onclick="setSwatch(50)"></button>
          <button class="mini sprite" onclick="setSwatch(51)"></button>
          <button class="mini sprite" onclick="setSwatch(52)"></button>
          <button class="mini sprite" onclick="setSwatch(53)"></button>
          <button class="mini sprite" onclick="setSwatch(54)"></button>
          <button class="mini sprite" onclick="setSwatch(55)"></button>
          <button class="mini sprite" onclick="setSwatch(56)"></button>
          <button class="mini sprite" onclick="setSwatch(57)"></button>
          <button class="mini sprite" onclick="setSwatch(58)"></button>
          <button class="mini sprite" onclick="setSwatch(59)"></button>
          <button class="mini sprite" onclick="setSwatch(60)"></button>
          <button class="mini sprite" onclick="setSwatch(61)"></button>
          <button class="mini sprite" onclick="setSwatch(62)"></button>
          <button class="mini sprite" onclick="setSwatch(63)"></button>
          <button class="mini sprite" onclick="setSwatch(64)"></button>
          <button class="mini sprite" onclick="setSwatch(65)"></button>
          <button class="mini sprite" onclick="setSwatch(66)"></button>
          <button class="mini sprite" onclick="setSwatch(67)"></button>
          <button class="mini sprite" onclick="setSwatch(68)"></button>
          <button class="mini sprite" onclick="setSwatch(69)"></button>
          <button class="mini sprite" onclick="setSwatch(70)"></button>
          <button class="mini sprite" onclick="setSwatch(71)"></button>
          <button class="mini sprite" onclick="setSwatch(72)"></button>
          <button class="mini sprite" onclick="setSwatch(73)"></button>
          <button class="mini sprite" onclick="setSwatch(74)"></button>
          <button class="mini sprite" onclick="setSwatch(75)"></button>
          <button class="mini sprite" onclick="setSwatch(76)"></button>
          <button class="mini sprite" onclick="setSwatch(77)"></button>
          <button class="mini sprite" onclick="setSwatch(78)"></button>
          <button class="mini sprite" onclick="setSwatch(79)"></button>
          <button class="mini sprite" onclick="setSwatch(80)"></button>
          <button class="mini sprite" onclick="setSwatch(81)"></button>
          <button class="mini sprite" onclick="setSwatch(82)"></button>
          <button class="mini sprite" onclick="setSwatch(83)"></button>
          <button class="mini sprite" onclick="setSwatch(84)"></button>
          <button class="mini sprite" onclick="setSwatch(85)"></button>
          <button class="mini sprite" onclick="setSwatch(86)"></button>
          <button class="mini sprite" onclick="setSwatch(87)"></button>
          <button class="mini sprite" onclick="setSwatch(88)"></button>
          <button class="mini sprite" onclick="setSwatch(89)"></button>
          <button class="mini sprite" onclick="setSwatch(90)"></button>
          <button class="mini sprite" onclick="setSwatch(91)"></button>
          <button class="mini sprite" onclick="setSwatch(92)"></button>
          <button class="mini sprite" onclick="setSwatch(93)"></button>
          <button class="mini sprite" onclick="setSwatch(94)"></button>
          <button class="mini sprite" onclick="setSwatch(95)"></button>
          <button class="mini sprite" onclick="setSwatch(96)"></button>
          <button class="mini sprite" onclick="setSwatch(97)"></button>
          <button class="mini sprite" onclick="setSwatch(98)"></button>
          <button class="mini sprite" onclick="setSwatch(99)"></button>
          <button class="mini sprite" onclick="setSwatch(100)"></button>
          <button class="mini sprite" onclick="setSwatch(101)"></button>
          <button class="mini sprite" onclick="setSwatch(102)"></button>
          <button class="mini sprite" onclick="setSwatch(103)"></button>
          <button class="mini sprite" onclick="setSwatch(104)"></button>
          <button class="mini sprite" onclick="setSwatch(105)"></button>
          <button class="mini sprite" onclick="setSwatch(106)"></button>
          <button class="mini sprite" onclick="setSwatch(107)"></button>
          <button class="mini sprite" onclick="setSwatch(108)"></button>
          <button class="mini sprite" onclick="setSwatch(109)"></button>
          <button class="mini sprite" onclick="setSwatch(110)"></button>
          <button class="mini sprite" onclick="setSwatch(111)"></button>
          <button class="mini sprite" onclick="setSwatch(112)"></button>
          <button class="mini sprite" onclick="setSwatch(113)"></button>
          <button class="mini sprite" onclick="setSwatch(114)"></button>
          <button class="mini sprite" onclick="setSwatch(115)"></button>
          <button class="mini sprite" onclick="setSwatch(116)"></button>
          <button class="mini sprite" onclick="setSwatch(117)"></button>
          <button class="mini sprite" onclick="setSwatch(118)"></button>
          <button class="mini sprite" onclick="setSwatch(119)"></button>
          <button class="mini sprite" onclick="setSwatch(120)"></button>
          <button class="mini sprite" onclick="setSwatch(121)"></button>
          <button class="mini sprite" onclick="setSwatch(122)"></button>
          <button class="mini sprite" onclick="setSwatch(123)"></button>
          <button class="mini sprite" onclick="setSwatch(124)"></button>
          <button class="mini sprite" onclick="setSwatch(125)"></button>
          <button class="mini sprite" onclick="setSwatch(126)"></button>
          <button class="mini sprite" onclick="setSwatch(127)"></button>
          <button class="mini sprite" onclick="setSwatch(128)"></button>
          <button class="mini sprite" onclick="setSwatch(129)"></button>
          <button class="mini sprite" onclick="setSwatch(130)"></button>
          <button class="mini sprite" onclick="setSwatch(131)"></button>
          <button class="mini sprite" onclick="setSwatch(132)"></button>
          <button class="mini sprite" onclick="setSwatch(133)"></button>
          <button class="mini sprite" onclick="setSwatch(134)"></button>
          <button class="mini sprite" onclick="setSwatch(135)"></button>
          <button class="mini sprite" onclick="setSwatch(136)"></button>
          <button class="mini sprite" onclick="setSwatch(137)"></button>
          <button class="mini sprite" onclick="setSwatch(138)"></button>
          <button class="mini sprite" onclick="setSwatch(139)"></button>
          <button class="mini sprite" onclick="setSwatch(140)"></button>
          <button class="mini sprite" onclick="setSwatch(141)"></button>
          <button class="mini sprite" onclick="setSwatch(142)"></button>
          <button class="mini sprite" onclick="setSwatch(143)"></button>
          <button class="mini sprite" onclick="setSwatch(144)"></button>
          <button class="mini sprite" onclick="setSwatch(145)"></button>
          <button class="mini sprite" onclick="setSwatch(146)"></button>
          <button class="mini sprite" onclick="setSwatch(147)"></button>
          <button class="mini sprite" onclick="setSwatch(148)"></button>
          <button class="mini sprite" onclick="setSwatch(149)"></button>
          <button class="mini sprite" onclick="setSwatch(150)"></button>
          <button class="mini sprite" onclick="setSwatch(151)"></button>
          <button class="mini sprite" onclick="setSwatch(152)"></button>
          <button class="mini sprite" onclick="setSwatch(153)"></button>
          <button class="mini sprite" onclick="setSwatch(154)"></button>
          <button class="mini sprite" onclick="setSwatch(155)"></button>
          <button class="mini sprite" onclick="setSwatch(156)"></button>
          <button class="mini sprite" onclick="setSwatch(157)"></button>
          <button class="mini sprite" onclick="setSwatch(158)"></button>
          <button class="mini sprite" onclick="setSwatch(159)"></button>
          <button class="mini sprite" onclick="setSwatch(160)"></button>
          <button class="mini sprite" onclick="setSwatch(161)"></button>
          <button class="mini sprite" onclick="setSwatch(162)"></button>
          <button class="mini sprite" onclick="setSwatch(163)"></button>
          <button class="mini sprite" onclick="setSwatch(164)"></button>
          <button class="mini sprite" onclick="setSwatch(165)"></button>
          <button class="mini sprite" onclick="setSwatch(166)"></button>
          <button class="mini sprite" onclick="setSwatch(167)"></button>
          <button class="mini sprite" onclick="setSwatch(168)"></button>
          <button class="mini sprite" onclick="setSwatch(169)"></button>
          <button class="mini sprite" onclick="setSwatch(170)"></button>
          <button class="mini sprite" onclick="setSwatch(171)"></button>
          <button class="mini sprite" onclick="setSwatch(172)"></button>
          <button class="mini sprite" onclick="setSwatch(173)"></button>
          <button class="mini sprite" onclick="setSwatch(174)"></button>
          <button class="mini sprite" onclick="setSwatch(175)"></button>
          <button class="mini sprite" onclick="setSwatch(176)"></button>
          <button class="mini sprite" onclick="setSwatch(177)"></button>
          <button class="mini sprite" onclick="setSwatch(178)"></button>
          <button class="mini sprite" onclick="setSwatch(179)"></button>
          <button class="mini sprite" onclick="setSwatch(180)"></button>
          <button class="mini sprite" onclick="setSwatch(181)"></button>
          <button class="mini sprite" onclick="setSwatch(182)"></button>
          <button class="mini sprite" onclick="setSwatch(183)"></button>
          <button class="mini sprite" onclick="setSwatch(184)"></button>
          <button class="mini sprite" onclick="setSwatch(185)"></button>
          <button class="mini sprite" onclick="setSwatch(186)"></button>
          <button class="mini sprite" onclick="setSwatch(187)"></button>
          <button class="mini sprite" onclick="setSwatch(188)"></button>
          <button class="mini sprite" onclick="setSwatch(189)"></button>
          <button class="mini sprite" onclick="setSwatch(190)"></button>
          <button class="mini sprite" onclick="setSwatch(191)"></button>
          <button class="mini sprite" onclick="setSwatch(192)"></button>
          <button class="mini sprite" onclick="setSwatch(193)"></button>
          <button class="mini sprite" onclick="setSwatch(194)"></button>
          <button class="mini sprite" onclick="setSwatch(195)"></button>
          <button class="mini sprite" onclick="setSwatch(196)"></button>
          <button class="mini sprite" onclick="setSwatch(197)"></button>
          <button class="mini sprite" onclick="setSwatch(198)"></button>
          <button class="mini sprite" onclick="setSwatch(199)"></button>
          <button class="mini sprite" onclick="setSwatch(200)"></button>
          <button class="mini sprite" onclick="setSwatch(201)"></button>
          <button class="mini sprite" onclick="setSwatch(202)"></button>
          <button class="mini sprite" onclick="setSwatch(203)"></button>
          <button class="mini sprite" onclick="setSwatch(204)"></button>
          <button class="mini sprite" onclick="setSwatch(205)"></button>
          <button class="mini sprite" onclick="setSwatch(206)"></button>
          <button class="mini sprite" onclick="setSwatch(207)"></button>
          <button class="mini sprite" onclick="setSwatch(208)"></button>
          <button class="mini sprite" onclick="setSwatch(209)"></button>
          <button class="mini sprite" onclick="setSwatch(210)"></button>
          <button class="mini sprite" onclick="setSwatch(211)"></button>
          <button class="mini sprite" onclick="setSwatch(212)"></button>
          <button class="mini sprite" onclick="setSwatch(213)"></button>
          <button class="mini sprite" onclick="setSwatch(214)"></button>
          <button class="mini sprite" onclick="setSwatch(215)"></button>
          <button class="mini sprite" onclick="setSwatch(216)"></button>
          <button class="mini sprite" onclick="setSwatch(217)"></button>
          <button class="mini sprite" onclick="setSwatch(218)"></button>
          <button class="mini sprite" onclick="setSwatch(219)"></button>
          <button class="mini sprite" onclick="setSwatch(220)"></button>
          <button class="mini sprite" onclick="setSwatch(221)"></button>
          <button class="mini sprite" onclick="setSwatch(222)"></button>
          <button class="mini sprite" onclick="setSwatch(223)"></button>
          <button class="mini sprite" onclick="setSwatch(224)"></button>
          <button class="mini sprite" onclick="setSwatch(225)"></button>
          <button class="mini sprite" onclick="setSwatch(226)"></button>
          <button class="mini sprite" onclick="setSwatch(227)"></button>
          <button class="mini sprite" onclick="setSwatch(228)"></button>
          <button class="mini sprite" onclick="setSwatch(229)"></button>
          <button class="mini sprite" onclick="setSwatch(230)"></button>
          <button class="mini sprite" onclick="setSwatch(231)"></button>
          <button class="mini sprite" onclick="setSwatch(232)"></button>
          <button class="mini sprite" onclick="setSwatch(233)"></button>
          <button class="mini sprite" onclick="setSwatch(234)"></button>
          <button class="mini sprite" onclick="setSwatch(235)"></button>
          <button class="mini sprite" onclick="setSwatch(236)"></button>
          <button class="mini sprite" onclick="setSwatch(237)"></button>
          <button class="mini sprite" onclick="setSwatch(238)"></button>
          <button class="mini sprite" onclick="setSwatch(239)"></button>
          <button class="mini sprite" onclick="setSwatch(240)"></button>
          <button class="mini sprite" onclick="setSwatch(241)"></button>
          <button class="mini sprite" onclick="setSwatch(242)"></button>
          <button class="mini sprite" onclick="setSwatch(243)"></button>
          <button class="mini sprite" onclick="setSwatch(244)"></button>
          <button class="mini sprite" onclick="setSwatch(245)"></button>
          <button class="mini sprite" onclick="setSwatch(246)"></button>
          <button class="mini sprite" onclick="setSwatch(247)"></button>
          <button class="mini sprite" onclick="setSwatch(248)"></button>
          <button class="mini sprite" onclick="setSwatch(249)"></button>
          <button class="mini sprite" onclick="setSwatch(250)"></button>
          <button class="mini sprite" onclick="setSwatch(251)"></button>
          <button class="mini sprite" onclick="setSwatch(252)"></button>

            
          </div>
      </div>
      rules

      <div class="rules">
        <div class="input2 rule-grid">
          <button class="mini when" data-index="0"></button>
          <button class="mini when" data-index="1"></button>
          <button class="mini when" data-index="2"></button>
          <button class="mini when" data-index="3"></button>
          <button class="mini when" data-index="4"></button>
          <button class="mini when" data-index="5"></button>
          <button class="mini when" data-index="6"></button>
          <button class="mini when" data-index="7"></button>
          <button class="mini when" data-index="8"></button>
        </div>
        <div class="rule-divider">
          =>
        </div>
        <div class="output2 rule-grid">
          <button class="mini then" data-index="0"></button>
          <button class="mini then" data-index="1"></button>
          <button class="mini then" data-index="2"></button>
          <button class="mini then" data-index="3"></button>
          <button class="mini then" data-index="4"></button>
          <button class="mini then" data-index="5"></button>
          <button class="mini then" data-index="6"></button>
          <button class="mini then" data-index="7"></button>
          <button class="mini then" data-index="8"></button>
        </div>
      </div>

      <div class="row">
        <div id="frames-amount">frames: <span id="totalFramesText">1</span></div>
        <div class = "frames">current frame: <span id="currentFrameText">1</span></div>
      </div>
      <div class="row">
        <label for="import-button">import reference image</label>
        <input type="file" id="imageInput" onclick="loadSourceImage()"/> 
      </div>
      <div class="row">
        <label for="load-all">load anim data</label>
        <input type="file" id="jsonInput" onclick="loadAnim()"/>
      </div>
      <div class="row">
        frames:
        <button onclick="backFrame()" id="decrementButton">‚¨ÖÔ∏è</button>
        <button onclick="playFrames()" id="playButton">‚ñ∂Ô∏è</button>
        <button onclick="advanceFrame()" id="incrementButton">‚û°Ô∏è</button>
        <button onclick="addFrame()" id="addButton">‚ûï</button>
      </div>
      
      <div class="row">
        <label for="save-all">save anim data </label>
        <button onclick="saveAnim()"; id="save-all">üíæ</button>

        <label for="save-frame">save frame as png</label>
        <button onclick="saveFrame()"; id="save-frame">üì∏</button>

        
      </div>
     
    </div>

    <!-- <div class="ui">
      <div class="row">
        <ul class="key">
          <li class = "arrow">arrow</li>
        </ul>
      </div>
    </div> -->

  <script>
    // Get the list element where the images will be appended
    const list = document.getElementById("glyphs");

    // The local path to the directory containing the images
    const dir = "assets/tiles/";

    let counter = 1;

    // use XMLHttpRequest to get the list of images in the directory
    const xhr = new XMLHttpRequest();
    xhr.open("GET", dir);
    xhr.onload = function() {
      if (xhr.status === 200) {
        // parse response text as json
        console.log(xhr.responseText);
        const files = JSON.parse(xhr.responseText);
        // Loop through each file in the directory
        files.forEach(file => {
          // Check if the file is an image
          if (file.type.match(/image.*/)) {
            // Create a <button> element
            const btn = document.createElement("button");
            // Create an <img> element and set its src to the file path
            const img = document.createElement("img");
            img.src = dir + file.name;
            // set the button title attribute with current counter 
            btn.setAttribute("title", `${counter}`);
            btn.setAttribute("onClick", `setSwatch(${counter});`);
            btn.setAttribute("class", "mini");

            // increment the counter 
            counter++;
            // Append the <img> element to the <button>
            btn.appendChild(img);
            // Append the <btn> element to the <div>
            list.appendChild(btn);
          }
        });
      } else {
        console.error(xhr.statusText);
      }
    };
    xhr.onerror = function(e) {
      console.error(xhr.statusText);
    };
    xhr.send();

  </script>
  </body>
</html>
