<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Sketch</title>

    <link rel="stylesheet" type="text/css" href="style.css">

    <script src="libraries/p5.min.js"></script>
    <script src="libraries/p5.sound.min.js"></script>
    
  </head>

  <body>
    <script src="sketch.js"></script>
    <script src="fpsTimer.js"></script>

    <div id="sketch"></div>
    <div class="ui" >
  
    shaded tiles
      <div class="palette shades">
          <button onclick="setSwatch(0, 1);" title="0" class="mini"><img srcset="/assets/tiles/Block216.png"/></button>
          <button onclick="setSwatch(1, 1);" title="1" class="mini"><img srcset="/assets/tiles/Block127.png"/></button>
          <button onclick="setSwatch(2, 1);" title="2" class="mini"><img srcset="/assets/tiles/Block177.png"/></button>
          <button onclick="setSwatch(3, 1);" title="3" class="mini"><img srcset="/assets/tiles/Block176.png"/></button>
          <button onclick="setSwatch(4, 1);" title="4" class="mini"><img srcset="/assets/tiles/Block130.png"/></button>
          <button onclick="setSwatch(5, 1);" title="5" class="mini"><img srcset="/assets/tiles/Block175.png"/></button>
          <button onclick="setSwatch(6, 1);" title="6" class="mini"><img srcset="/assets/tiles/Block133.png"/></button>
          <button onclick="setSwatch(7, 1);" title="6" class="mini"><img srcset="/assets/tiles/Block0.png"/></button>
      </div>
     tiles
      <div class="palette glyphs" >
          <div class="sprite-grid">
          <button class="mini sprite" onclick="setSwatch(0, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(1, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(2, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(3, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(4, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(5, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(6, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(7, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(8, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(9, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(10, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(11, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(12, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(13, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(14, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(15, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(16, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(17, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(18, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(19, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(20, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(21, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(22, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(23, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(24, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(25, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(26, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(27, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(28, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(29, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(30, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(31, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(32, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(33, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(34, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(35, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(36, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(37, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(38, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(39, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(40, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(41, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(42, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(43, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(44, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(45, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(46, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(47, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(48, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(49, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(50, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(51, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(52, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(53, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(54, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(55, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(56, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(57, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(58, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(59, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(60, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(61, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(62, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(63, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(64, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(65, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(66, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(67, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(68, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(69, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(70, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(71, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(72, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(73, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(74, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(75, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(76, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(77, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(78, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(79, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(80, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(81, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(82, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(83, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(84, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(85, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(86, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(87, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(88, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(89, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(90, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(91, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(92, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(93, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(94, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(95, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(96, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(97, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(98, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(99, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(100, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(101, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(102, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(103, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(104, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(105, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(106, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(107, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(108, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(109, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(110, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(111, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(112, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(113, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(114, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(115, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(116, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(117, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(118, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(119, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(120, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(121, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(122, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(123, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(124, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(125, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(126, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(127, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(128, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(129, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(130, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(131, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(132, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(133, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(134, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(135, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(136, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(137, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(138, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(139, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(140, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(141, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(142, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(143, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(144, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(145, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(146, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(147, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(148, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(149, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(150, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(151, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(152, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(153, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(154, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(155, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(156, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(157, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(158, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(159, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(160, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(161, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(162, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(163, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(164, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(165, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(166, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(167, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(168, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(169, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(170, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(171, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(172, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(173, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(174, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(175, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(176, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(177, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(178, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(179, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(180, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(181, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(182, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(183, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(184, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(185, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(186, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(187, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(188, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(189, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(190, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(191, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(192, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(193, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(194, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(195, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(196, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(197, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(198, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(199, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(200, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(201, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(202, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(203, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(204, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(205, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(206, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(207, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(208, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(209, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(210, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(211, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(212, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(213, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(214, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(215, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(216, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(217, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(218, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(219, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(220, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(221, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(222, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(223, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(224, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(225, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(226, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(227, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(228, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(229, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(230, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(231, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(232, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(233, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(234, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(235, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(236, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(237, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(238, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(239, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(240, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(241, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(242, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(243, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(244, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(245, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(246, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(247, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(248, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(249, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(250, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(251, 2)"></button>
          <button class="mini sprite" onclick="setSwatch(252, 2)"></button>

            
          </div>
      </div>
      rules

      <div class="rules">
        <div class="rule-grid" id="input1">
          <button class="mini when" data-index="0"></button>
          <button class="mini when" data-index="1"></button>
          <button class="mini when" data-index="2"></button>
          <button class="mini when" data-index="3"></button>
          <button class="mini when" data-index="4"></button>
          <button class="mini when" data-index="5"></button>
          <button class="mini when" data-index="6"></button>
          <button class="mini when" data-index="7"></button>
          <button class="mini when" data-index="8"></button>
        </div>
        <div class="rule-divider">
          =>
        </div>
        <div class="rule-grid" id="output1">
          <button class="mini then" data-index="0"></button>
          <button class="mini then" data-index="1"></button>
          <button class="mini then" data-index="2"></button>
          <button class="mini then" data-index="3"></button>
          <button class="mini then" data-index="4"></button>
          <button class="mini then" data-index="5"></button>
          <button class="mini then" data-index="6"></button>
          <button class="mini then" data-index="7"></button>
          <button class="mini then" data-index="8"></button>
        </div>
      </div>

      <div class="row">
        <div id="frames-amount">frames: <span id="totalFramesText">1</span></div>
        <div class = "frames">current frame: <span id="currentFrameText">1</span></div>
      </div>
      <div class="row">
        <label for="import-button">import reference image</label>
        <input type="file" id="imageInput" onclick="loadSourceImage()"/> 
      </div>
      <div class="row">
        <label for="load-all">load anim data</label>
        <input type="file" id="jsonInput" onclick="loadAnim()"/>
      </div>
      <div class="row">
        frames:
        <button onclick="backFrame()" id="decrementButton">⬅️</button>
        <button onclick="playFrames()" id="playButton">▶️</button>
        <button onclick="advanceFrame()" id="incrementButton">➡️</button>
        <button onclick="addFrame()" id="addButton">➕</button>
      </div>
      
      <div class="row">
        <label for="save-all">save anim data </label>
        <button onclick="saveAnim()"; id="save-all">💾</button>

        <label for="save-frame">save frame as png</label>
        <button onclick="saveFrame()"; id="save-frame">📸</button>

        
      </div>
     
    </div>

    <!-- <div class="ui">
      <div class="row">
        <ul class="key">
          <li class = "arrow">arrow</li>
        </ul>
      </div>
    </div> -->

  <script>
    // Get the list element where the images will be appended
    const list = document.getElementById("glyphs");

    // The local path to the directory containing the images
    const dir = "assets/tiles/";

    let counter = 1;

    // use XMLHttpRequest to get the list of images in the directory
    const xhr = new XMLHttpRequest();
    xhr.open("GET", dir);
    xhr.onload = function() {
      if (xhr.status === 200) {
        // parse response text as json
        console.log(xhr.responseText);
        const files = JSON.parse(xhr.responseText);
        // Loop through each file in the directory
        files.forEach(file => {
          // Check if the file is an image
          if (file.type.match(/image.*/)) {
            // Create a <button> element
            const btn = document.createElement("button");
            // Create an <img> element and set its src to the file path
            const img = document.createElement("img");
            img.src = dir + file.name;
            // set the button title attribute with current counter 
            btn.setAttribute("title", `${counter}`);
            btn.setAttribute("onClick", `setSwatch(${counter});`);
            btn.setAttribute("class", "mini");

            // increment the counter 
            counter++;
            // Append the <img> element to the <button>
            btn.appendChild(img);
            // Append the <btn> element to the <div>
            list.appendChild(btn);
          }
        });
      } else {
        console.error(xhr.statusText);
      }
    };
    xhr.onerror = function(e) {
      console.error(xhr.statusText);
    };
    xhr.send();

  </script>
  </body>
</html>
